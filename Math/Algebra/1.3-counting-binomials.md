# 1.3 Counting Principles and Binomial Theorem

## Objectives
- Apply addition and multiplication principles correctly.
- Distinguish when order matters (permutations) vs when it does not (combinations).
- Compute permutations $^nP_r$ and combinations $\binom{n}{r}$.
- Expand $(a+b)^n$ using the Binomial Theorem and extract coefficients / specific terms.
- Connect combinatorics with probability contexts.

## Prerequisites
- Factorials basics.
- Algebraic expansion patterns.
- Basic probability language (events, outcomes) helpful.

## Concept Overview
Counting systematically avoids omissions and overcounting. The binomial theorem encodes combinatorial selection counts into algebraic coefficients. Recognizing structure reduces brute force expansion.

## Core Definitions & Formulas
| Concept | Formula / Definition | Notes |
|---------|----------------------|-------|
| Factorial | $n! = n(n-1)\dots 1$, $0!=1$ | Rapid growth |
| Permutation | $^nP_r = \dfrac{n!}{(n-r)!}$ | Ordered selection |
| Combination | $\binom{n}{r} = \dfrac{n!}{r!(n-r)!}$ | Unordered selection |
| Symmetry | $\binom{n}{r}=\binom{n}{n-r}$ | Pascal row symmetry |
| Pascal Recurrence | $\binom{n}{r}=\binom{n-1}{r}+\binom{n-1}{r-1}$ | Proof by counting |
| Binomial Theorem | $(a+b)^n=\sum_{k=0}^{n}\binom{n}{k} a^{n-k} b^{k}$ | $n+1$ terms |
| General Term | $T_{k+1}=\binom{n}{k} a^{n-k} b^{k}$ | Index shift awareness |

## Derivations / Proof Sketches
### Binomial Coefficient Counting
Choosing which $k$ positions among $n$ take the factor $b$ yields $\binom{n}{k}$ distinct terms contributing $a^{n-k} b^k$.

### Pascal Recurrence
Partition $r$-subsets of an $n$-set by whether they contain a fixed element: include it ⇒ choose remaining $r-1$ from $n-1$; exclude ⇒ choose $r$ from $n-1$.

<details>
<summary>Combinatorial Proof of $(1+1)^n=2^n$</summary>
Left side: expand $(1+1)^n=\sum_{k=0}^{n}\binom{n}{k}$. Right side counts all subsets (each element in/out) ⇒ $2^n$. Therefore $\sum_{k=0}^{n}\binom{n}{k}=2^{n}$.
</details>

## Visual Intuition
### Factorial vs Exponential Growth
```chart
{
	"type": "line",
	"data": {
		"labels": ["1","2","3","4","5","6","7"],
		"datasets": [
			{"label":"n!","data":[1,2,6,24,120,720,5040],"borderColor":"rgb(233,30,99)"},
			{"label":"2^n","data":[2,4,8,16,32,64,128],"borderColor":"rgb(33,150,243)"}
		]
	},
	"options": {"plugins":{"title":{"display":true,"text":"Factorial Outpaces Exponential (base 2)"}}, "scales":{"y":{"beginAtZero":true}}}
}
```

### Decision Flow: Permutation vs Combination
```mermaid
graph TD
	A[Counting Problem] --> B{Order Matters?}
	B -->|Yes| C{Repetition Allowed?}
	B -->|No| D{Repetition Allowed?}
	C -->|Yes| E[Use Product / k^n forms]
	C -->|No| F[Permutation ^nP_r]
	D -->|Yes| G[Stars & Bars (advanced)]
	D -->|No| H[Combination binom(n,r)]
```

### Pascal Triangle (Desmos Structural Aid)
```desmos
// Approximate first few rows coefficients via expressions
// Row n choose k for n=0..5
\binom{0}{0}=1
\binom{1}{0}=1
\binom{1}{1}=1
\binom{2}{0}=1
\binom{2}{1}=2
\binom{2}{2}=1
// Continue pattern mentally (visual aid placeholder)
```

## Worked Examples
### Example 1: Permutation vs Combination
Selecting 3 committee members from 8 with no roles: $\binom{8}{3}$. Assigning president, VP, treasurer: $^8P_3$.

### Example 2: Specific Binomial Coefficient
Coefficient of $a^{7} b^{3}$ in $(a+b)^{10}$ is $\binom{10}{3}=120$.

### Example 3: Term Containing $x^{5}$ in $(2+x)^8$
General term $T_{k+1}=\binom{8}{k} 2^{8-k} x^{k}$, set $k=5$. Term: $\binom{8}{5} 2^{3} x^{5}=56\cdot8 x^{5}=448 x^{5}$.

### Example 4: Coefficient Extraction Mixed Bases
Coefficient of $x^{4}$ in $(3x+2)^{6}$: need $k$ with $(3x)^k 2^{6-k}$ gives $x^{4}$ ⇒ $k=4$. Coefficient = $\binom{6}{4} 3^{4} 2^{2}=15 \cdot 81 \cdot 4 = 4860$.

### Example 5: Probability Link
Number of 5-card hands from 52: $\binom{52}{5}$. Probability all hearts: $\binom{13}{5}/\binom{52}{5}$.

## Common Mistakes & Tips
- Using permutation when order irrelevant.
- Forgetting factorial simplification (cancel early).
- Off-by-one in term index ($T_{k+1}$ vs $T_k$ forms).
- Misidentifying exponent pairing (sum of exponents should equal $n$).

## Practice Set
### Core
1. Compute $^7P_3$.
2. Compute $\binom{9}{2}$.
3. Find coefficient of $x^{3}$ in $(x+4)^5$.
4. How many subsets of a 12-element set? 
5. Coefficient of $a^{5} b^{2}$ in $(a+b)^{7}$.
6. Expand first three and last term of $(x-2)^6$.

### Challenge
7. Number of ways to arrange letters of MISSISSIPPI.
8. Coefficient of $x^{10}$ in $(x^2+1)^{8}$.
9. Find $r$ so that terms $T_{r}$ and $T_{r+1}$ of $(1+x)^{2n}$ are equal.
10. Prove $\sum_{k=0}^{n} k \binom{n}{k} = n 2^{n-1}$.
11. Ratio $\binom{n}{k+1}/\binom{n}{k}$ simplifies to?

### Extension
12. Derive general form of central binomial coefficient $\binom{2n}{n}$ and approximate growth (qualitatively).
13. Show $\binom{n}{0}^2+\binom{n}{1}^2+\dots+\binom{n}{n}^2=\binom{2n}{n}$ (combinatorial argument).
14. Determine largest term in expansion of $(1+x)^{n}$ for $x=1$ (ties allowed) and relate to central coefficient.

<details>
<summary>Markscheme (Core)</summary>

---
1. $^7P_3=7\cdot6\cdot5=210$.
2. $\binom{9}{2}=36$.
3. $\binom{5}{3}4^{2}=10\cdot16=160$.
4. $2^{12}$.
5. $\binom{7}{2}=21$.
6. $(x-2)^6 = x^6 -12x^5+ ... + (-2)^6$ first three: $x^6 -12x^5 + 60x^4$, last: $+64$.

</details>

<details>
<summary>Markscheme (Challenge)</summary>

---
7. $\dfrac{11!}{4!4!2!1!}=34650$.
8. Need $2k=10$ ⇒ $k=5$: coefficient $\binom{8}{5}=56$.
9. $\frac{\binom{2n}{r+1}}{\binom{2n}{r}}=1$ ⇒ $\frac{2n-r}{r+1}=1$ ⇒ $2n-r=r+1$ ⇒ $r=n-\tfrac{1}{2}$ not integer ⇒ equal occurs for $r=n$ and $r=n+1$ central tie.
10. Use identity $k\binom{n}{k}= n\binom{n-1}{k-1}$; sum gives $n 2^{n-1}$.
11. $(n-k)/(k+1)$.

</details>

<details>
<summary>Markscheme (Extension)</summary>

---
12. $\binom{2n}{n}=\dfrac{(2n)!}{(n!)^2}$ grows ~ $\dfrac{4^{n}}{\sqrt{\pi n}}$ (Stirling, enrichment).
13. Count ways choose $n$ from two disjoint $n$-sets.
14. Largest coefficients central near $k= n/2$.

</details>

## Applications / Modelling
- Probability calculations (cards, selections).
- Polynomial approximations & power expansions.
- Lattice path counting.

## Extension / HL Enrichment
- Negative / fractional binomial expansions $(1+x)^r$ (Taylor form) – preview.
- Multinomial theorem generalization.

## Summary & Key Takeaways
- Decide order relevance first.
- Binomial coefficients count combinations; appear in expansions and identities.
- Pascal recurrence underlies many algebraic patterns.

## Quick Reference
| Expression | Result |
|------------|-------|
| $^nP_r$ | $n!/(n-r)!$ |
| $\binom{n}{r}$ | $n!/(r!(n-r)!)$ |
| $(a+b)^n$ | $\sum_{k} \binom{n}{k} a^{n-k} b^{k}$ |
| Symmetry | $\binom{n}{r}=\binom{n}{n-r}$ |

## Metadata
Topic Code: M1.3  
Level: SL/HL  
Tags: counting, permutations, combinations, binomial, pascal  
Dependencies: factorial basics  

